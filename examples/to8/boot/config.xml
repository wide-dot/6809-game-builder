<configuration>
    <target name="fd">
        <default name="floppydisk.storage" value="new-engine/config/storage.xml"/>

        <!-- optional defines - default values are declared in relevant <routine>.const.asm -->
        <define symbol="boot.CHECK_MEMORY_EXT"/>            <!-- throw an error at boot if memory ext. is not detected -->
        <define symbol="loader.PAGE" value="4"/>            <!-- tells where the boot will place the loader (default: 4) -->
        <define symbol="loader.ADDRESS" value="$0000"/>     <!-- tells where the boot will place the loader (default: $0000) -->
        <define symbol="loader.DEFAULT_SCENE" value="0"/>   <!-- tells what scene will be loaded at boot time (default: 0) -->

        <floppydisk model="fd640">
            <data section="LOADER">
                <lwasm format="raw">
                    <asm filename="new-engine/system/to8/bootloader/loader.asm"/>
                </lwasm>
            </data>

            <data section="BOOT" maxsize="0x100">   
                <cksumfd640>
                    <lwasm format="raw">
                        <asm filename="new-engine/system/to8/bootloader/boot.asm"/>
                    </lwasm>
                </cksumfd640>
            </data>

            <section name="INDEX" track="0" face="0" sector="14"/>
            <section name="LINK"  track="0" face="1" sector="1"/>
            <section name="DATA"  track="1" face="0" sector="1"/>

            <directory id="0" section="INDEX" genbinary="src/directories/directory.bin"> <!--genbinary is optional-->
                <default name="direntry.section"      value="DATA"/>
                <default name="direntry.codec"        value="zx0"/>
                <default name="direntry.linksection"  value="LINK"/>
                <default name="direntry.maxsize"      value="0x4000"/>
                <default name="lwasm.format"          value="obj"/>

                <direntry name="assets.main.runpixel">
                    <lwasm>
                        <asm filename="src/assets/main/run-pixel.asm"/>
                    </lwasm>
                </direntry>
                <direntry name="assets.object.pixel">
                    <lwasm>
                        <asm filename="src/assets/object/pixel.asm"/>
                    </lwasm>
                </direntry>

                <direntry name="builder.floppydisk.directory" gensymbols="src/directories/direntries-id.asm">
                    <lwasm>
                        <asm filename="src/directories/direntries-id.asm"/>
                    </lwasm>
                </direntry>
            </directory>

            <fd  filename="demo.fd"/>
            <sd  filename="demo.sd"/>
            <sap filename="demo.sap"/>
            <hfe filename="demo.hfe"/>
        </floppydisk>
    </target>
</configuration>

